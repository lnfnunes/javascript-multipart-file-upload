function Heap(e){BaseCollection.call(this,{_dataStore:[],_compare:e})}function HeapNode(e,t,a){BaseCollection.call(this,{_value:t,_index:a,_dataStore:e})}function LinkedList(){BaseCollection.call(this,{_size:0})}function LinkedListIterator(e){BaseCollection.call(this,{_list:e,_index:0,_curr:e.first(),_next:e.first().next})}function LinkedListNode(e){BaseCollection.call(this,{_value:e})}function Queue(){BaseCollection.call(this,{_dataStore:[]})}function Stack(){BaseCollection.call(this,{_dataStore:[]})}function BaseCollection(e){BaseCollection.prototype.init.call(this,e||{})}function BaseObject(e){BaseObject.prototype.init.call(this,e||{})}function Observable(){BaseObject.call(this,{_handlers:[]})}function XHR(e,t){BaseObject.call(this,{_config:{method:e.method||"",url:e.url||"",withCredentials:e.withCredentials||!1,headers:e.headers||[]},_events:{onSuccess:new Observable,onProgress:new Observable,onComplete:new Observable,onError:new Observable,onCancel:new Observable},_xhr:t||new XMLHttpRequest})}Heap.prototype=Object.create(BaseCollection.prototype,{constructor:Heap,_dataStore:{value:void 0,enumerable:!0,configurable:!1,writable:!0},_compare:{value:void 0,enumerable:!1,configurable:!0,writable:!0},_swap:{value:function(e,t){var a=e.value;e.value=t.value,t.value=a},enumerable:!1,configurable:!1,writable:!1},_heapifyUp:{value:function(e){var t=this._dataStore[e];t.hasParent&&this._compare(t.parent.value,t.value)>0&&(this._swap(t.parent,t),this._heapifyUp(t.parent.index))},enumerable:!1,configurable:!1,writable:!1},_heapifyDown:{value:function(e){var t=this._dataStore[e],a=t;t.hasLeft&&this._compare(a.value,t.left.value)>0&&(a=t.left),t.hasRight&&this._compare(a.value,t.right.value)>0&&(a=t.right),t!=a&&(this._swap(t,a),this._heapifyDown(a.index))},enumerable:!1,configurable:!1,writable:!1},peek:{value:function(){return 0==this._dataStore.length?null:this._dataStore[0].value},enumerable:!1,configurable:!1,writable:!1},poll:{value:function(){var e=this._dataStore[0].Value;return this._swap(this._dataStore[0],this._dataStore[this._dataStore.length-1]),this._dataStore.pop(),this._dataStore.length>0&&this._heapifyDown(0),e},enumerable:!1,configurable:!1,writable:!1},add:{value:function(e){var t=this._dataStore.length;this._dataStore.push(new HeapNode(this._dataStore,e,t)),this._heapifyUp(t)},enumerable:!1,configurable:!1,writable:!1},length:{get:function(){return this._dataStore.length},configurable:!1},empty:{get:function(){return 0==this._dataStore.length},configurable:!1},clear:{value:function(){this._dataStore=[]},configurable:!1}}),HeapNode.prototype=Object.create(BaseCollection.prototype,{constructor:HeapNode,_dataStore:{value:void 0,enumerable:!0,configurable:!1,writable:!0},_value:{value:void 0,enumerable:!1,configurable:!1,writable:!0},_index:{value:void 0,enumerable:!1,configurable:!1,writable:!0},index:{get:function(){return this._index},configurable:!1},parent:{get:function(){return this._dataStore[(this._index-1)/2>>0]},configurable:!1},left:{get:function(){return this._dataStore[2*this._index+1]},configurable:!1},right:{get:function(){return this._dataStore[2*this._index+2]},configurable:!1},hasParent:{get:function(){return 0!=this._index&&void 0!=this.parent},configurable:!1},hasLeft:{get:function(){return void 0!=this.left},configurable:!1},hasRight:{get:function(){return void 0!=this.right},configurable:!1},value:{get:function(){return this._value},set:function(e){this._value=e},configurable:!1}}),LinkedList.prototype=Object.create(BaseCollection.prototype,{constructor:LinkedList,_head:{value:void 0,enumerable:!1,configurable:!1,writable:!0},_tail:{value:void 0,enumerable:!1,configurable:!1,writable:!0},iterator:{value:function(){return new LinkedListIterator(this)},enumerable:!1,configurable:!1,writable:!1},forEach:{value:function(e){for(var t=this.iterator();t.hasNext();){var a=t.nextIndex(),i=t.next();"function"==typeof e&&e(a,i,this)}},enumerable:!1,configurable:!1,writable:!1},first:{value:function(){return this._head},enumerable:!1,configurable:!1,writable:!1},last:{value:function(){return this._tail},enumerable:!1,configurable:!1,writable:!1},add:{value:function(e){var t=new LinkedListNode(e);void 0==this._head?(this._head=t,this._tail=t):(this._tail.next=t,t.prev=this._tail,this._tail=t),this._size++},enumerable:!1,configurable:!1,writable:!1},addAt:{value:function(e,t){var a=new LinkedListNode(t);if(e<0||e>this._size)throw"IndexOutOfBoundsException";if(0==e)a.next=this._head,this._head.prev=a,this._head=a;else if(e==this._size-1)a.prev=this._tail,this._tail.next=a,this._tail=a;else{for(var i=this._head,n=e;n>0;)i=i.next,n--;var r=i.prev;r.next=a,a.prev=r,a.next=i,i.prev=a}this._size++},enumerable:!1,configurable:!1,writable:!1},remove:{value:function(e){for(var t=this._head;void 0!=t;){if(t.value==e){var a=t.prev,i=t.next;void 0!=a&&(a.next=t.next),void 0!=i&&(i.prev=t.prev),this._size--;break}t=t.next}},enumerable:!1,configurable:!1,writable:!1},removeAt:{value:function(e){if(e<0||e>=this._size)throw"IndexOutOfBoundsException";if(0==e)this._head=this._head.next,void 0!=this._head&&(this._head.prev=void 0);else if(e==this._size-1)this._tail=this._tail.prev,void 0!=this._tail&&(this._tail.next=void 0);else{for(var t=this._head,a=e;a>0;)t=t.next,a--;var i=t.prev,n=t.next;i.next=t.next,n.prev=t.prev}this._size--},enumerable:!1,configurable:!1,writable:!1},get:{value:function(e){if(e<0||e>=this._size)throw"IndexOutOfBoundsException";if(0==e)return this._head;if(e==this._size-1)return this._tail;for(var t=this._head,a=e;a>0;)t=t.next,a--;return t},enumerable:!1,configurable:!1,writable:!1},set:{value:function(e,t){if(e<0||e>=this._size)throw"IndexOutOfBoundsException";if(0==e)this._head.value=t;else if(e==this._size-1)this._tail.value=t;else{for(var a=this._head,i=e;i>0;)a=a.next,i--;a.value=t}},enumerable:!1,configurable:!1,writable:!1},length:{get:function(){return this._size},configurable:!1},empty:{get:function(){return 0==this._size},configurable:!1},clear:{value:function(){this._head=void 0,this._tail=void 0,this._size=0},configurable:!1}}),LinkedListIterator.prototype=Object.create(BaseCollection.prototype,{constructor:LinkedListIterator,_list:{value:void 0,enumerable:!1,configurable:!1,writable:!0},_index:{value:void 0,enumerable:!1,configurable:!1,writable:!0},_curr:{value:void 0,enumerable:!1,configurable:!1,writable:!0},_next:{value:void 0,enumerable:!1,configurable:!1,writable:!0},hasNext:{value:function(){return!this._index==this._list.length},enumerable:!1,configurable:!1,writable:!1},next:{value:function(){return this._index++,this._curr=this._next,this._next=this._curr.next,this.curr},enumerable:!1,configurable:!1,writable:!1},nextIndex:{value:function(){return this._index},enumerable:!1,configurable:!1,writable:!1}}),LinkedListNode.prototype=Object.create(BaseCollection.prototype,{constructor:LinkedListNode,_value:{value:void 0,enumerable:!1,configurable:!1,writable:!0},_next:{value:void 0,enumerable:!1,configurable:!1,writable:!0},_prev:{value:void 0,enumerable:!1,configurable:!1,writable:!0},value:{get:function(){return this._value},set:function(e){this._value=e},configurable:!1},next:{get:function(){return this._next},set:function(e){this._next=e},configurable:!1},prev:{get:function(){return this._prev},set:function(e){this._prev=e},configurable:!1}}),Queue.prototype=Object.create(BaseCollection.prototype,{constructor:Queue,_dataStore:{value:void 0,enumerable:!0,configurable:!1,writable:!0},enqueue:{value:function(e){this._dataStore.push(e)},configurable:!1},dequeue:{value:function(){return this._dataStore.shift()},configurable:!1},front:{value:function(){return this._dataStore[0]},configurable:!1},back:{value:function(){return this._dataStore[this._dataStore.length-1]},configurable:!1},length:{get:function(){return this._dataStore.length},configurable:!1},empty:{get:function(){return 0==this._dataStore.length},configurable:!1},clear:{value:function(){this._dataStore=[]},configurable:!1}}),Stack.prototype=Object.create(BaseCollection.prototype,{constructor:Stack,_dataStore:{value:void 0,enumerable:!0,configurable:!1,writable:!0},push:{value:function(e){this._dataStore.push(e)},configurable:!1},pop:{value:function(){return this._dataStore.pop()},configurable:!1},peek:{value:function(){return this._dataStore[this._dataStore.length-1]},configurable:!1},length:{get:function(){return this._dataStore.length},configurable:!1},empty:{get:function(){return 0==this._dataStore.length},configurable:!1},clear:{value:function(){this._dataStore=[]},configurable:!1}}),BaseCollection.prototype=Object.create(null,{constructor:BaseCollection,init:{value:function(e){this.apply(this,e),this.addListeners()},enumerable:!1,configurable:!1,writable:!0},apply:{value:function(e,t){for(var a in t)e[a]=t[a]},enumerable:!1,configurable:!1,writable:!1},addListeners:{value:function(){},enumerable:!1,configurable:!1,writable:!1}}),BaseObject.prototype=Object.create(null,{constructor:BaseObject,init:{value:function(e){this.apply(this,e),this.addListeners()},enumerable:!1,configurable:!1,writable:!0},apply:{value:function(e,t){for(var a in t)e[a]=t[a]},enumerable:!1,configurable:!1,writable:!1},addListeners:{value:function(){},enumerable:!1,configurable:!1,writable:!1}}),Observable.prototype=Object.create(BaseObject.prototype,{constructor:Observable,_handlers:{value:void 0,enumerable:!0,configurable:!1,writable:!0},subscribe:{value:function(e){this._handlers.push(e)},enumerable:!1,configurable:!1,writable:!1},publish:{value:function(e,t){this._handlers.forEach(function(a){a.call(e,t)})},enumerable:!1,configurable:!1,writable:!1},unsubscribe:{value:function(e){this._handlers=this._handlers.filter(function(t){if(t!==e)return t})},enumerable:!1,configurable:!1,writable:!1}}),XHR.prototype=Object.create(BaseObject.prototype,{constructor:XHR,_config:{value:void 0,enumerable:!1,configurable:!0,writable:!0},_events:{value:void 0,enumerable:!1,configurable:!0,writable:!0},_xhr:{value:void 0,enumerable:!1,configurable:!0,writable:!0},_isRequestSuccessful:{value:function(){return 0==this.xhr.status||this.xhr.status>=200&&this.xhr.status<300||304==this.xhr.status||1223==this.xhr.status},enumerable:!1,configurable:!1,writable:!1},_parseHeaders:{value:function(e){var t={};return e?(e.split("\n").forEach(function(e){var a=e.split(":"),i=a[0].trim().toLowerCase(),n=a[1].trim().replace(/"/g,"");i&&(t[i]=t[i]?t[i]+", "+n:n)}),t):t},enumerable:!1,configurable:!1,writable:!1},_onSuccess:{value:function(e,t,a,i){this.events.onSuccess.publish(e,{response:t,status:a,headers:i})},enumerable:!1,configurable:!1,writable:!1},_onProgress:{value:function(e,t){this.events.onProgress.publish(e,t)},enumerable:!1,configurable:!1,writable:!1},_onComplete:{value:function(e,t,a,i){this.events.onComplete.publish(e,{response:t,status:a,headers:i})},enumerable:!1,configurable:!1,writable:!1},_onError:{value:function(e,t,a,i){this.events.onError.publish(e,{response:t,status:a,headers:i})},enumerable:!1,configurable:!1,writable:!1},_onCancel:{value:function(e,t,a,i){this.events.onCancel.publish(e,{response:t,status:a,headers:i})},enumerable:!1,configurable:!1,writable:!1},config:{get:function(){return this._config},configurable:!1},events:{get:function(){return this._events},configurable:!1},xhr:{get:function(){return this._xhr},configurable:!1},addListeners:{value:function(){var e=this;e.xhr.onprogress=function(t){var a=Math.round(t.lengthComputable?100*t.loaded/t.total:0);e._onProgress(e,a)},e.xhr.onload=function(){if(this.readyState===this.DONE){var t=JSON.parse(this.responseText),a=e._parseHeaders(this.getAllResponseHeaders()),i=e._isRequestSuccessful()?"_onSuccess":"_onError";e[i](e,t,this.status,a),e._onComplete(e,t,this.status,a)}},e.xhr.onerror=function(){var t=JSON.parse(this.responseText),a=e._parseHeaders(this.getAllResponseHeaders());e._onError(e,t,this.status,a),e._onComplete(e,t,this.status,a)},e.xhr.onabort=function(){var t=JSON.parse(this.responseText),a=e._parseHeaders(this.getAllResponseHeaders());e._onCancel(e,t,this.status,a),e._onComplete(e,t,this.status,a)}},enumerable:!1,configurable:!1,writable:!1},send:{value:function(e){var t=this;t.xhr.open(t.config.method,t.config.url,!0),t.xhr.withCredentials=t.config.withCredentials,t.config.headers.forEach(function(e){t.xhr.setRequestHeader(e.name,e.value)}),t.xhr.send(e)},enumerable:!1,configurable:!1,writable:!1}});